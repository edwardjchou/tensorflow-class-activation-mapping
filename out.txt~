WARNING:tensorflow:From /usr/local/lib/python2.7/dist-packages/tensorflow/python/util/tf_should_use.py:107: initialize_all_variables (from tensorflow.python.ops.variables) is deprecated and will be removed after 2017-03-02.
Instructions for updating:
Use `tf.global_variables_initializer` instead.
WARNING:tensorflow:From mnist.py:31: all_variables (from tensorflow.python.ops.variables) is deprecated and will be removed after 2017-03-02.
Instructions for updating:
Please use tf.global_variables instead.
2017-12-10 08:21:53.059282: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA
2017-12-10 08:21:53.181231: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 3ba6:00:00.0
totalMemory: 11.17GiB freeMemory: 415.12MiB
2017-12-10 08:21:53.181272: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 3ba6:00:00.0, compute capability: 3.7)
2017-12-10 08:21:53.979763: W tensorflow/core/common_runtime/bfc_allocator.cc:217] Allocator (GPU_0_bfc) ran out of memory trying to allocate 200.27MiB. The caller indicates that this is not a failure, but may mean that there could be performance gains if more memory is available.
2017-12-10 08:21:53.979824: W tensorflow/core/common_runtime/bfc_allocator.cc:217] Allocator (GPU_0_bfc) ran out of memory trying to allocate 284.75MiB. The caller indicates that this is not a failure, but may mean that there could be performance gains if more memory is available.
2017-12-10 08:21:53.979843: W tensorflow/core/common_runtime/bfc_allocator.cc:217] Allocator (GPU_0_bfc) ran out of memory trying to allocate 260.00MiB. The caller indicates that this is not a failure, but may mean that there could be performance gains if more memory is available.
2017-12-10 08:22:03.980111: W tensorflow/core/common_runtime/bfc_allocator.cc:273] Allocator (GPU_0_bfc) ran out of memory trying to allocate 21.36MiB.  Current allocation summary follows.
2017-12-10 08:22:03.980168: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (256): 	Total Chunks: 13, Chunks in use: 13. 3.2KiB allocated for chunks. 3.2KiB in use in bin. 808B client-requested in use in bin.
2017-12-10 08:22:03.980177: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (512): 	Total Chunks: 1, Chunks in use: 1. 768B allocated for chunks. 768B in use in bin. 560B client-requested in use in bin.
2017-12-10 08:22:03.980183: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1024): 	Total Chunks: 2, Chunks in use: 1. 2.2KiB allocated for chunks. 1.2KiB in use in bin. 1.0KiB client-requested in use in bin.
2017-12-10 08:22:03.980188: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2048): 	Total Chunks: 1, Chunks in use: 1. 2.5KiB allocated for chunks. 2.5KiB in use in bin. 2.5KiB client-requested in use in bin.
2017-12-10 08:22:03.980194: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4096): 	Total Chunks: 1, Chunks in use: 0. 7.0KiB allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980199: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8192): 	Total Chunks: 1, Chunks in use: 1. 9.5KiB allocated for chunks. 9.5KiB in use in bin. 9.4KiB client-requested in use in bin.
2017-12-10 08:22:03.980205: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16384): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980210: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (32768): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980214: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (65536): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980237: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (131072): 	Total Chunks: 2, Chunks in use: 1. 400.0KiB allocated for chunks. 200.0KiB in use in bin. 200.0KiB client-requested in use in bin.
2017-12-10 08:22:03.980243: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (262144): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980248: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (524288): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980252: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (1048576): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980257: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (2097152): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980262: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (4194304): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980267: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (8388608): 	Total Chunks: 1, Chunks in use: 1. 8.01MiB allocated for chunks. 8.01MiB in use in bin. 8.01MiB client-requested in use in bin.
2017-12-10 08:22:03.980273: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (16777216): 	Total Chunks: 1, Chunks in use: 1. 21.36MiB allocated for chunks. 21.36MiB in use in bin. 21.36MiB client-requested in use in bin.
2017-12-10 08:22:03.980278: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (33554432): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980284: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (67108864): 	Total Chunks: 2, Chunks in use: 2. 160.34MiB allocated for chunks. 160.34MiB in use in bin. 128.17MiB client-requested in use in bin.
2017-12-10 08:22:03.980289: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (134217728): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980293: I tensorflow/core/common_runtime/bfc_allocator.cc:627] Bin (268435456): 	Total Chunks: 0, Chunks in use: 0. 0B allocated for chunks. 0B in use in bin. 0B client-requested in use in bin.
2017-12-10 08:22:03.980299: I tensorflow/core/common_runtime/bfc_allocator.cc:643] Bin for 21.36MiB was 16.00MiB, Chunk State: 
2017-12-10 08:22:03.980306: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0000 of size 1280
2017-12-10 08:22:03.980311: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0500 of size 256
2017-12-10 08:22:03.980315: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0600 of size 256
2017-12-10 08:22:03.980318: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0700 of size 256
2017-12-10 08:22:03.980322: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0800 of size 256
2017-12-10 08:22:03.980326: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0900 of size 256
2017-12-10 08:22:03.980330: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0a00 of size 256
2017-12-10 08:22:03.980333: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0b00 of size 256
2017-12-10 08:22:03.980337: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0c00 of size 256
2017-12-10 08:22:03.980341: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc0d00 of size 2560
2017-12-10 08:22:03.980345: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104fc3300 of size 256
2017-12-10 08:22:03.980349: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104ff5400 of size 256
2017-12-10 08:22:03.980356: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104ff5500 of size 256
2017-12-10 08:22:03.980361: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104ff5600 of size 256
2017-12-10 08:22:03.980365: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104ff5700 of size 768
2017-12-10 08:22:03.980369: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104ff5a00 of size 256
2017-12-10 08:22:03.980373: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104ff5f00 of size 9728
2017-12-10 08:22:03.980377: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x1104ff8500 of size 204800
2017-12-10 08:22:03.980381: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x110502a500 of size 8400128
2017-12-10 08:22:03.980385: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x110582d200 of size 89600000
2017-12-10 08:22:03.980397: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x110ada0200 of size 22400000
2017-12-10 08:22:03.980403: I tensorflow/core/common_runtime/bfc_allocator.cc:661] Chunk at 0x110c2fce00 of size 78524928
2017-12-10 08:22:03.980407: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1104fc1700 of size 7168
2017-12-10 08:22:03.980419: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1104fc3400 of size 204800
2017-12-10 08:22:03.980423: I tensorflow/core/common_runtime/bfc_allocator.cc:670] Free at 0x1104ff5b00 of size 1024
2017-12-10 08:22:03.980426: I tensorflow/core/common_runtime/bfc_allocator.cc:676]      Summary of in-use Chunks by size: 
2017-12-10 08:22:03.980432: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 13 Chunks of size 256 totalling 3.2KiB
2017-12-10 08:22:03.980437: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 768 totalling 768B
2017-12-10 08:22:03.980441: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 1280 totalling 1.2KiB
2017-12-10 08:22:03.980446: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 2560 totalling 2.5KiB
2017-12-10 08:22:03.980450: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 9728 totalling 9.5KiB
2017-12-10 08:22:03.980455: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 204800 totalling 200.0KiB
2017-12-10 08:22:03.980459: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 8400128 totalling 8.01MiB
2017-12-10 08:22:03.980464: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 22400000 totalling 21.36MiB
2017-12-10 08:22:03.980468: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 78524928 totalling 74.89MiB
2017-12-10 08:22:03.980473: I tensorflow/core/common_runtime/bfc_allocator.cc:679] 1 Chunks of size 89600000 totalling 85.45MiB
2017-12-10 08:22:03.980478: I tensorflow/core/common_runtime/bfc_allocator.cc:683] Sum Total of in-use chunks: 189.92MiB
2017-12-10 08:22:03.980485: I tensorflow/core/common_runtime/bfc_allocator.cc:685] Stats: 
Limit:                   199360512
InUse:                   199147520
MaxInUse:                199157760
NumAllocs:                      29
MaxAllocSize:             92524800

2017-12-10 08:22:03.980493: W tensorflow/core/common_runtime/bfc_allocator.cc:277] ************************************************************************************xxxxxxxxxxxxxxxx
2017-12-10 08:22:03.980509: W tensorflow/core/framework/op_kernel.cc:1192] Resource exhausted: OOM when allocating tensor with shape[70,32,50,50]
Traceback (most recent call last):
  File "mnist.py", line 41, in <module>
    sess.run(train_step, feed_dict={x: batch_xs, y_: batch_ys})
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py", line 889, in run
    run_metadata_ptr)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py", line 1120, in _run
    feed_dict_tensor, options, run_metadata)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py", line 1317, in _do_run
    options, run_metadata)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py", line 1336, in _do_call
    raise type(e)(node_def, op, message)
tensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape[70,32,50,50]
	 [[Node: LeNet/conv2/Conv2D = Conv2D[T=DT_FLOAT, data_format="NHWC", padding="SAME", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device="/job:localhost/replica:0/task:0/device:GPU:0"](LeNet/pool1/MaxPool, LeNet/conv2/weights/read)]]

Caused by op u'LeNet/conv2/Conv2D', defined at:
  File "mnist.py", line 17, in <module>
    y, top_conv = le_net(images=x, num_classes=10)
  File "/home/cs273b_admin/vis/tensorflow-class-activation-mapping/lenet_slim.py", line 10, in le_net
    net = slim.conv2d(net, 64, [5, 5], scope='conv2')
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/framework/python/ops/arg_scope.py", line 181, in func_with_args
    return func(*args, **current_args)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/layers/python/layers/layers.py", line 1033, in convolution
    outputs = layer.apply(inputs)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py", line 671, in apply
    return self.__call__(inputs, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py", line 575, in __call__
    outputs = self.call(inputs, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/convolutional.py", line 167, in call
    outputs = self._convolution_op(inputs, self.kernel)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_ops.py", line 835, in __call__
    return self.conv_op(inp, filter)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_ops.py", line 499, in __call__
    return self.call(inp, filter)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/nn_ops.py", line 187, in __call__
    name=self.name)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_nn_ops.py", line 631, in conv2d
    data_format=data_format, name=name)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py", line 787, in _apply_op_helper
    op_def=op_def)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py", line 2956, in create_op
    op_def=op_def)
  File "/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py", line 1470, in __init__
    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access

ResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[70,32,50,50]
	 [[Node: LeNet/conv2/Conv2D = Conv2D[T=DT_FLOAT, data_format="NHWC", padding="SAME", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true, _device="/job:localhost/replica:0/task:0/device:GPU:0"](LeNet/pool1/MaxPool, LeNet/conv2/weights/read)]]

